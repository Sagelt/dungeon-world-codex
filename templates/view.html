{% import 'macros/monster.html' as statblocks %}
{% extends 'base/two-column-base.html' %}

{% block title %}{{ monster.name }}—Dungeon World Monster Maker{% endblock title %}
{% block left %}
	{{ statblocks.statblock(monster, format_urls) }}
	<p>Created by: <a href="{{ format_urls['profile'] | format(monster.creator.key().id()) | replace(" ", "") }}">{{monster.creator.display_name}}</a></p>
	{% if monster.edited %}<p><strong>Edited:</strong> This monster has been edited. Its probably still cool, but its stats may not line up with standard monsters.</p>{% endif %}
	{% set product = monster.get_product() %}
	{% if product %}
		<p>This monster is from {{ product.name }}.</p>
	{% endif %}
{% endblock left %}
{% block right %}
    {% if monster.creator.account == user %}
        <h3>Manage</h3>
		<p><a href="{{ format_urls['monster.edit_url'] | format(monster.key().id()) | replace(" ", "") }}">Edit</a></p>
		<p><a href="{{ format_urls['monster.delete_url'] | format(monster.key().id()) | replace(" ", "") }}">Delete</a></p>
	{% else %}
		{% if profile %}
		<script>
			function vote() {
			  	$.ajax({
				    url: '{{ format_urls["monster.favorite_url"] | format(monster.key().id()) | replace(" ", "") }}',
				    type: 'GET',
				    success: function() { 
						if($("#star").text() == "✭"){
							$("#star").text("✩");
						}else{
							$("#star").text("✭");
						}
					}
				});
			}
		</script>
		
		<p style="font-size:400%; cursor: pointer; margin:0; float:left" onclick="vote()" id='star'>{% if vote %}✭{% else %}✩{% endif %}</p>
		<h3>Like it? Star it</h3>
		{% endif %}
    {% endif %}
{% endblock right%}


